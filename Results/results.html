<html>
    <head>
    <link type="text/css" href="css/bootstrap.css" rel="stylesheet">
    <link type="text/css" href="css/bootstrap-responsive.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 10px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .navbar {
        font-size: 18px;
      }
	  fieldset { border:0; }	
	  label,select,.ui-select-menu { float: left; margin-right: 10px; }
	  select { width: 200px; }
	  .wrap ul.ui-selectmenu-menu-popup li a { font-weight: bold; }
    </style>
	<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/highcharts.js"></script>
    <script type="text/javascript" src="js/exporting.js"></script>	
	<script>
  $(document).ready(function () {
  
  jQuery.getJSON('json/info.json', function(data) {
  var elements = []
  var time = data.time[0];
  $.each(data.elements, function(key, val) {
  elements.push('<li id="mesh_'+val+'"><a href="#" onclick="render_charts(\''+time+'_'+val+'\');">'+val+'</a></li>'); 
	});
	
 	$.each(elements, function(idx, val) {
    $('#meshes').append(val);
    });
    
    $.each(data.time, function(idx, val) {
    if (data.time.length ==1){
    alert("ok");
    $('#navmenu').append('<li id="menu_'+val+'"><a href="#" onclick="update_link(\''+val+'\');">Solution</a></li>');
    }
    else{
    $('#navmenu').append('<li id="menu_'+val+'"><a href="#" onclick="update_link(\''+val+'\');">'+val+'</a></li>');
    }
    });
    $('#menu_-1').addClass("active");
    if (data.adaptation){
     $('#navmenu').append('<li id="menu_adapt"><a href="#" onclick="update_link(\'adapt\');">Adaptation</a></li>');} 
 });
});
  </script>
  <script>
 function update_link(day) { 
 $('#meshes').empty();
 $('#pressure').empty();
 $('#flow').empty();
 $('#wss').empty();
 $('#re').empty();
 
 $('#mesh_info').addClass("hide");
 $('#length').empty();
 $('#min_d').empty();
 $('#max_d').empty();
 $('#mean_p').empty();
 $('#mean_q').empty();
 $('#mean_w').empty();
 $('#mean_r').empty();
 
 $('[id^="menu_"]').removeClass("active");
 $('#menu_'+day).addClass("active");
 
 jQuery.getJSON('json/info.json', function(data) {
  var elements = []
  elements.push('<li class="nav-header">Choose an element</li>');
    
  $.each(data.elements, function(key, val) {
  
  if (day =='adapt'){
  
  elements.push('<li id="mesh_'+val+'"><a href="#" onclick="render_charts_adapt(\''+day+'_'+val+'\');">'+val+'</a></li>');
  }
  else {
  elements.push('<li id="mesh_'+val+'"><a href="#" onclick="render_charts(\''+day+'_'+val+'\');">'+val+'</a></li>');
  }
	});
 	$.each(elements, function(idx, val) {
    $('#meshes').append(val);
    });   
  });  
 
 
 };
  </script>
  
  <script type="text/javascript">
  function render_charts_adapt(mesh) { 
    jQuery.getJSON('json/'+mesh+'.json', function(data) {
    $('[id^="mesh_"]').removeClass("active");
    $('#mesh_'+data.name).addClass("active");
		$.each(data.items, function(i,item){
    
    	var chart1 = new Highcharts.Chart(
    	{
                chart:{
                    renderTo: "flow",
                    type: 'spline',    
                },
    			title: {
                    text: 'Volumetric flow Rate'
                },
    			xAxis: {
                    title: {
                        text: 'Time (days)',
                    }
                },
    			yAxis: {
                    title: {
                        text: 'Volumetric Flow Rate (mL/min)'
                    },
                    min : 0
                },
                
                plotOptions: {
					spline: {
						marker: {
							radius: 4,
							lineColor: '#666666',
							lineWidth: 1
						}
					}
				},
				
				tooltip: {
					crosshairs: true,
					shared: true
				},
                        
                credits: {
                	enabled: false
                },
                
                legend: {
                	enabled: false
                },
                
                exporting: {
                	filename : data.name
                },
                
                series: [{name:"Flow volume", data:item.flow}]  
            }  
        );    
        
        var chart2 = new Highcharts.Chart(
    	{
                chart:{
                    renderTo: "wss",
                    type: 'spline',    
                },
    			title: {
                    text: 'Pressure'
                },
    			xAxis: {
                    title: {
                        text: 'Time (days)'
                    }
                },
    			yAxis: {
                    title: {
                        text: 'Pressure signal (mmHg)'
                    },
                    min : 0
                },
                
                plotOptions: {
					spline: {
						marker: {
							radius: 4,
							lineColor: '#666666',
							lineWidth: 1
						}
					}
				},
				
				tooltip: {
					crosshairs: true,
					shared: true
				},
                
                credits: {
                	enabled: false
                },
                
                legend: {
                	enabled: false
                },
                
                exporting: {
                	filename : data.name
                },
                
                series: [{name:"Pressure", data:item.pressure}]  
            }  
        ); 
        
        var chart3 = new Highcharts.Chart(
    	{
                chart:{
                    renderTo: "re",
                    type: 'spline',    
                },
    			title: {
                    text: 'Wall Shear Stress Peak'
                },
    			xAxis: {
                    title: {
                        text: 'Time (days)'
                    }
                },
    			yAxis: {
                    title: {
                        text: 'Wall Shear Stress Peak (dynes/cm2)'
                    },
                    min : 0
                },
                
                plotOptions: {
					spline: {
						marker: {
							radius: 4,
							lineColor: '#666666',
							lineWidth: 1
						}
					}
				},
				
                tooltip: {
					crosshairs: true,
					shared: true
				},
				
                credits: {
                	enabled: false
                },
                
                legend: {
                	enabled: false
                },
                
                exporting: {
                	filename : data.name
                },
                
                series: [{name:"Wss Peak", data:item.wssP}]  
            }  
        ); 
        
        var chart4 = new Highcharts.Chart(
    	{
                chart:{
                    renderTo: "pressure",
                    type: 'spline',    
                },
    			title: {
                    text: 'Diameter'
                    },
    			xAxis: {
                    title: {
                        text: 'Time (days)'
                    }
                },
    			yAxis: {
                    title: {
                        text: 'Diameter (mm)'
                    },
                    min : 0
                },
                
                plotOptions: {
					spline: {
						marker: {
							radius: 4,
							lineColor: '#666666',
							lineWidth: 1
						}
					}
				},
				
				tooltip: {
					crosshairs: true,
					shared: true
				},
                
                credits: {
                	enabled: false
                },
                
                legend: {
                	enabled: false
                },
                
                exporting: {
                	filename : data.name
                },
                
                series: [{name:"Diameter", data:item.diameter}]  
            }  
        ); 
        
        });
    });
    }
  </script>
  <script type="text/javascript">
    function render_charts(mesh) { 

    $('#mesh_info').removeClass("hide");
    jQuery.getJSON('json/'+mesh+'.json', function(data) {
    	$('[id^="mesh_"]').removeClass("active");
    	$('#mesh_'+data.name).addClass("active");
    	$('#length').html(data.length);
     	$('#min_d').html(data.diameter_min);
     	$('#max_d').html(data.diameter_max);
     	$('#mean_p').html(data.mean_pressure);
     	$('#mean_q').html(data.mean_flow);
     	$('#mean_w').html(data.mean_wss);
     	$('#mean_r').html(data.mean_re);
     	
    	$.each(data.items, function(i,item){
    	
    	var chart1 = new Highcharts.Chart(
    	{
                chart:{
                    renderTo: "flow",
                    type: 'line',    
                },
    			title: {
                    text: 'Volumetric Flow Rate'
                },
    			xAxis: {
                    title: {
                        text: 'Time (s)'
                    }
                },
    			yAxis: {
                    title: {
                        text: 'Volumetric Flow Rate (mL/min)'
                    },
                    min: data.min_flow
                },
                plotOptions: {
                	series: {
                	
                	lineWidth:10 	
                	}
                },
                
                credits: {
                	enabled: false
                },
                
                legend: {
                	enabled: false
                },
                
                exporting: {
                	filename : data.name
                },
                
                series: [{name:"Flow volume", data:item.flow}]  
            }  
        );    
        
        var chart2 = new Highcharts.Chart(
    	{
                chart:{
                    renderTo: "pressure",
                    type: 'line',    
                },
    			title: {
                    text: 'Pressure'
                },
    			xAxis: {
                    title: {
                        text: 'Time (s)'
                    }
                },
    			yAxis: {
                    title: {
                        text: 'Pressure signal (mmHg)'
                    },
                    min : data.min_pressure
                },
                plotOptions: {
                	series: {
                	
                	lineWidth:10 	
                	}
                },
                
                credits: {
                	enabled: false
                },
                
                legend: {
                	enabled: false
                },
                
                exporting: {
                	filename : data.name
                },
                
                series: [{name:"Pressure", data:item.pressure}]  
            }  
        ); 
        
        var chart3 = new Highcharts.Chart(
    	{
                chart:{
                    renderTo: "wss",
                    type: 'line',    
                },
    			title: {
                    text: 'Wall Shear Stress'
                },
    			xAxis: {
                    title: {
                        text: 'Time (s)'
                    }
                },
    			yAxis: {
                    title: {
                		text: 'Wall Shear Stress (dynes/cm^2)',
                		enabled:true
           			},
                    min : data.min_wss
                },
                plotOptions: {
                	series: {
                	
                	lineWidth:10 	
                	}
                },
                
                credits: {
                	enabled: false
                },
                
                legend: {
                	enabled: false
                },
                
                exporting: {
                	filename : data.name
                },
                
                series: [{name:"Wss", data:item.wss}]  
            }  
        ); 
        
        var chart4 = new Highcharts.Chart(
    	{
                chart:{
                    renderTo: "re",
                    type: 'line',    
                },
    			title: {
                    text: 'Reynolds Number'
                    },
    			xAxis: {
                    title: {
                        text: 'Time (s)'
                    }
                },
    			yAxis: {
                    title: {
                        text: 'Reynolds Number'
                    },
                    min : data.min_re
                },
                plotOptions: {
                	series: {
                	
                	lineWidth:10 	
                	}
                },
                
                credits: {
                	enabled: false
                },
                
                legend: {
                	enabled: false
                },
                
                exporting: {
                	filename : data.name
                },
                
                series: [{name:"Re", data:item.re}]  
            }  
        ); 
        
        });
    });
    }
    
    </script>
    </head>
    <body>
 	
 	<div class="container-fluid">
      <div class="row-fluid">
        <div class="span2">
          <div class="well sidebar-nav">
          
            <ul id="meshes" class="nav nav-list">
              <li class="nav-header">Choose an element</li>
            </ul>
            
          </div><!--/.well -->
          
        </div><!--/span-->
        <div class="span10">
       
        <div class="navbar ">
      		<div class="navbar-inner">
        		<div class="container-fluid">
		          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
		            <span class="icon-bar"></span>
		          </a>
          		  <a class="brand">Time</a>
          		<div class="nav-collapse">	
          		<ul class="nav" id="navmenu">
              
            </ul>
         	    </div><!--/.nav-collapse -->
       		 </div>
     	  </div>
		</div>
       
        			
		<div class="row-fluid">
			<table id="mesh_info" class="table tablesorter table-striped table-bordered table-condensed hide">
        			<thead>
			            <tr>
			              <th>Length</th>
			              <th>Min Diameter</th>
			              <th>Max Diameter</th>
			              <th>Mean Pressure</th>
			              <th>Mean Flow</th>
			              <th>Mean Wss</th>
			              <th>Mean Re</th>
			            </tr>
			          </thead>
			          <tbody>
			          <tr>
			          	<td id="length"></td>
			          	<td id="min_d"></td>
			          	<td id="max_d"></td>
			          	<td id="mean_p"></td>
			          	<td id="mean_q"></td>
			          	<td id="mean_w"></td>
			          	<td id="mean_r"></td>
			          </tr>	
			          </tbody>
        		</table>	
			
			</div>
			<div class="row-fluid">
            <div id="pressure" class="span6">
            </div><!--/span-->
            <div id="flow" class="span6">
            </div><!--/span-->
            </div><!--/row-->
            <div class="row-fluid">
            <div id="wss" class="span6">
            </div><!--/span-->
            <div id="re" class="span6">
            </div><!--/span-->
            </div><!--/row-->
            </div>

        </div><!--/span-->
      </div><!--/row-->
    </div><!--/.fluid-container-->
	</body>
    </html>

